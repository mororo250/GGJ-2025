[gd_scene load_steps=9 format=3 uid="uid://cx0ilp71jq5ck"]

[ext_resource type="Script" path="res://src/agents/Player.cs" id="1_0mgrt"]
[ext_resource type="Script" path="res://src/agents/Chain.cs" id="2_lv8g0"]
[ext_resource type="Texture2D" uid="uid://o3l5j0ntfv8n" path="res://assets/test/primitiveShapes/circle-64.png" id="2_neshv"]
[ext_resource type="Texture2D" uid="uid://hhcwyurve760" path="res://assets/player/Submarino.png" id="4_7hhma"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_6pvqm"]
bounce = 1.2

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_5xasv"]

[sub_resource type="CircleShape2D" id="CircleShape2D_ry2yf"]
radius = 32.0

[sub_resource type="CircleShape2D" id="CircleShape2D_j6bdv"]
radius = 18.0

[node name="RigidBody2D" type="RigidBody2D" node_paths=PackedStringArray("_sprite2D", "_chain")]
physics_material_override = SubResource("PhysicsMaterial_6pvqm")
gravity_scale = 0.02
lock_rotation = true
continuous_cd = 2
contact_monitor = true
max_contacts_reported = 1
linear_damp = 0.2
script = ExtResource("1_0mgrt")
_sprite2D = NodePath("SubSprite")
_chain = NodePath("Chain")

[node name="Chain" type="Node2D" parent="." node_paths=PackedStringArray("_chainTip", "_chainTipArea", "_chainSprite")]
position = Vector2(0, 12)
script = ExtResource("2_lv8g0")
_chainTip = NodePath("ChainTipBody")
_chainTipArea = NodePath("ChainTipBody/ChainTipOverlapArea")
_chainSprite = NodePath("ChainSprite")

[node name="ChainTipBody" type="StaticBody2D" parent="Chain"]
scale = Vector2(0.063, 0.063)
collision_layer = 2
collision_mask = 2
physics_material_override = SubResource("PhysicsMaterial_5xasv")

[node name="ChainTipSprite" type="Sprite2D" parent="Chain/ChainTipBody"]
texture_repeat = 2
texture = ExtResource("2_neshv")
region_rect = Rect2(0, 0, 32, 32)

[node name="ChainTipCollisionShape" type="CollisionShape2D" parent="Chain/ChainTipBody"]
shape = SubResource("CircleShape2D_ry2yf")

[node name="ChainTipOverlapArea" type="Area2D" parent="Chain/ChainTipBody"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Chain/ChainTipBody/ChainTipOverlapArea"]
shape = SubResource("CircleShape2D_ry2yf")

[node name="ChainSprite" type="Sprite2D" parent="Chain"]
texture_repeat = 2
scale = Vector2(0.031, 0.031)
texture = ExtResource("2_neshv")
centered = false
offset = Vector2(-32, 0)
flip_v = true
region_enabled = true
region_rect = Rect2(0, 0, 64, 0)

[node name="SubSprite" type="Sprite2D" parent="."]
texture = ExtResource("4_7hhma")
hframes = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(1, -1)
shape = SubResource("CircleShape2D_j6bdv")

[connection signal="body_shape_entered" from="." to="." method="OnCollision"]
